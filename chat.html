<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Batalla de Historias Anime</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background-color: #1a1a2e;
      color: #f5f5f5;
      padding: 40px;
    }
    h1 {
      color: #ff4ec2;
    }
    button {
      padding: 12px 20px;
      background-color: #ff4ec2;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      margin-top: 20px;
    }
    button:hover {
      background-color: #e142b1;
    }
    .historia {
      margin-top: 30px;
      font-size: 18px;
      line-height: 1.6;
    }
    .batalla {
      margin-top: 30px;
      background-color: #0f0f1a;
      padding: 20px;
      border-radius: 8px;
    }
    .turno {
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <h1>Batalla de Historias Anime</h1>
  <button onclick="generarHistorias()">Generar y Simular Batalla</button>
  <div id="historia1" class="historia"></div>
  <div id="historia2" class="historia"></div>
  <div id="batalla" class="batalla"></div>

  <script>
    const nombres = ["Haruki", "Aoi", "Ren", "Kira", "Yuna", "Takeshi", "Hana", "Souta"];
    const ciudades = ["Tokio", "Seúl", "Osaka", "Kioto", "Sapporo", "Nagasaki"];
    const ojos = ["azules como el mar", "rojos como el fuego", "dorados como el sol", "verdes como la esmeralda", "violeta profundo"];
    const cabellos = ["negro azabache", "plateado brillante", "rojo escarlata", "rubio dorado", "celeste metálico"];
    const marcas = ["una cicatriz en forma de luna", "un sello maldito en el cuello", "una marca brillante en el pecho", "ojos demoníacos ocultos", "un tatuaje que brilla al usar poder"];
    const habilidades = [
      {nombre: "control del tiempo", fuerza: 95},
      {nombre: "invocación de bestias selladas", fuerza: 90},
      {nombre: "lectura mental avanzada", fuerza: 80},
      {nombre: "gravedad con la voz", fuerza: 88},
      {nombre: "resurrección tras la muerte", fuerza: 92},
      {nombre: "absorción de energía", fuerza: 87},
      {nombre: "maldición del silencio", fuerza: 85},
      {nombre: "teletransportación cuántica", fuerza: 86}
    ];
    const enemigos = [
      "una organización secreta", "un demonio ancestral", "un amigo de la infancia corrompido",
      "una maldición que consume el alma", "un consejo de dioses", "una profecía destructiva"
    ];
    const giros = [
      "descubrió que todo era un ciclo sin fin", "la persona que amaba era el enemigo", "murió pero regresó con una nueva misión",
      "renunció a su poder por los demás", "viajó al pasado y lo empeoró todo"
    ];

    function obtenerHabilidades() {
      let copia = [...habilidades];
      let seleccionadas = [];
      for (let i = 0; i < 2; i++) {
        const index = Math.floor(Math.random() * copia.length);
        seleccionadas.push(copia.splice(index, 1)[0]);
      }
      return seleccionadas;
    }

    function crearPersonaje() {
      const nombre = nombres[Math.floor(Math.random() * nombres.length)];
      const ciudad = ciudades[Math.floor(Math.random() * ciudades.length)];
      const colorOjos = ojos[Math.floor(Math.random() * ojos.length)];
      const colorCabello = cabellos[Math.floor(Math.random() * cabellos.length)];
      const marca = marcas[Math.floor(Math.random() * marcas.length)];
      const nivel = Math.floor(Math.random() * 10000) + 1;
      const habilidad = obtenerHabilidades();
      const enemigo = enemigos[Math.floor(Math.random() * enemigos.length)];
      const giro = giros[Math.floor(Math.random() * giros.length)];

      return {
        nombre, ciudad, colorOjos, colorCabello, marca, nivel, habilidad, enemigo, giro
      };
    }

    function historiaTexto(p) {
      return `En ${p.ciudad}, nació ${p.nombre}, un joven con ojos ${p.colorOjos} y cabello ${p.colorCabello}, marcado por ${p.marca}. Su poder se manifestó como ${p.habilidad[0].nombre} y ${p.habilidad[1].nombre}. Su existencia fue amenazada por ${p.enemigo}, y durante su travesía ${p.giro}.`;
    }

    function simularBatalla(p1, p2) {
      const div = document.getElementById("batalla");
      div.innerHTML = "<h2>Simulación de Batalla</h2>";

      let texto = "";

      for (let i = 0; i < 4; i++) {
        const atacante = i % 2 === 0 ? p1 : p2;
        const defensor = i % 2 === 0 ? p2 : p1;
        const habilidad = atacante.habilidad[i % 2];
        texto += `<div class="turno"><strong>${atacante.nombre}</strong> usa <em>${habilidad.nombre}</em> contra <strong>${defensor.nombre}</strong>!<br/>`;

        if (Math.random() < habilidad.fuerza / 100) {
          texto += `¡El ataque fue devastador!<br/></div>`;
          defensor.nivel -= Math.floor(habilidad.fuerza * 30);
        } else {
          texto += `¡Pero ${defensor.nombre} resistió el impacto!<br/></div>`;
          defensor.nivel -= Math.floor(habilidad.fuerza * 10);
        }
      }

      const ganador = p1.nivel > p2.nivel ? p1.nombre : p2.nombre;
      texto += `<h3>Resultado Final: Gana ${ganador}</h3>`;
      div.innerHTML += texto;
    }

    function generarHistorias() {
      const p1 = crearPersonaje();
      const p2 = crearPersonaje();

      document.getElementById("historia1").innerHTML = `<h2>${p1.nombre}</h2><p>${historiaTexto(p1)}</p><p><strong>Poder:</strong> ${p1.nivel}</p>`;
      document.getElementById("historia2").innerHTML = `<h2>${p2.nombre}</h2><p>${historiaTexto(p2)}</p><p><strong>Poder:</strong> ${p2.nivel}</p>`;

      simularBatalla(p1, p2);
    }
  </script>
</body>
</html>
