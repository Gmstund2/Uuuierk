<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Generador de Batallas Anime</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background-color: #0f0f1e;
      color: #f5f5f5;
      padding: 40px;
    }
    h1 {
      color: #ff4ec2;
    }
    button {
      padding: 12px 20px;
      background-color: #ff4ec2;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      margin-top: 20px;
    }
    button:hover {
      background-color: #e142b1;
    }
    .historia {
      margin-top: 30px;
      font-size: 18px;
      line-height: 1.6;
    }
  </style>
</head>
<body>
  <h1>Generador de Batallas Anime</h1>
  <button onclick="generarHistorias()">Generar Historias</button>
  <div id="resultado" class="historia"></div>

  <script>
    const nombres = ["Akira", "Yuki", "Ren", "Hana", "Kaito", "Sora", "Miyu", "Takeshi"];
    const ciudades = ["Tokio", "Seúl", "Kioto", "Osaka", "Nagoya"];
    const ojos = ["azules como el mar", "rojos como el fuego", "dorados como el sol", "verdes como esmeraldas", "grises como la niebla"];
    const cabellos = ["negro azabache", "blanco como la nieve", "rosado eléctrico", "plateado brillante", "café oscuro"];
    const marcas = ["una cicatriz en forma de luna", "un sello ancestral en el pecho", "un tatuaje que brilla con ira", "una marca demoníaca en el ojo", "una cruz invertida en la espalda"];

    const poderes = [
      "controlar el tiempo", "crear ilusiones", "super fuerza", "manipulación mental", "invisibilidad",
      "regeneración instantánea", "invocación de demonios", "teletransportación", "control de la gravedad", "crear barreras absolutas"
    ];

    const ventajas = {
      "controlar el tiempo": ["super fuerza", "invocación de demonios", "invisibilidad"],
      "crear ilusiones": ["super fuerza", "manipulación mental"],
      "manipulación mental": ["invisibilidad", "invocación de demonios"],
      "control de la gravedad": ["super fuerza", "teletransportación"],
      "crear barreras absolutas": ["control de la gravedad", "invocación de demonios", "super fuerza"],
      "teletransportación": ["manipulación mental", "regeneración instantánea"],
      "invisibilidad": ["invocación de demonios"],
      "invocación de demonios": [],
      "regeneración instantánea": [],
      "super fuerza": []
    };

    function obtenerAleatorio(lista) {
      return lista[Math.floor(Math.random() * lista.length)];
    }

    function generarPersonaje() {
      const nombre = obtenerAleatorio(nombres);
      const ciudad = obtenerAleatorio(ciudades);
      const colorOjos = obtenerAleatorio(ojos);
      const colorCabello = obtenerAleatorio(cabellos);
      const marca = obtenerAleatorio(marcas);
      const nivel = Math.floor(Math.random() * 10000) + 1;
      const habilidades = [];
      while (habilidades.length < 2) {
        const poder = obtenerAleatorio(poderes);
        if (!habilidades.includes(poder)) habilidades.push(poder);
      }

      return { nombre, ciudad, colorOjos, colorCabello, marca, nivel, habilidades };
    }

    function describirPersonaje(p) {
      return `
        En la ciudad de ${p.ciudad} nació ${p.nombre}, con ojos ${p.colorOjos} y cabello ${p.colorCabello}. Portaba ${p.marca}, lo que lo marcó desde su nacimiento.
        Aunque su nivel de poder era de ${p.nivel}, poseía habilidades únicas como ${p.habilidades.join(" y ")}.
      `;
    }

    function determinarGanador(p1, p2) {
      let ventaja1 = 0;
      let ventaja2 = 0;

      for (let poder1 of p1.habilidades) {
        for (let poder2 of p2.habilidades) {
          if (ventajas[poder1]?.includes(poder2)) ventaja1++;
          if (ventajas[poder2]?.includes(poder1)) ventaja2++;
        }
      }

      if (ventaja1 > ventaja2) return p1;
      if (ventaja2 > ventaja1) return p2;
      return p1.nivel >= p2.nivel ? p1 : p2;
    }

    function generarHistorias() {
      const p1 = generarPersonaje();
      const p2 = generarPersonaje();

      const descripcion1 = describirPersonaje(p1);
      const descripcion2 = describirPersonaje(p2);

      const ganador = determinarGanador(p1, p2);
      const perdedor = ganador === p1 ? p2 : p1;

      const resultado = `
        ${descripcion1}
        <br><br>
        ${descripcion2}
        <br><br>
        Ambos se encontraron en un conflicto inevitable. Sus habilidades chocaron en una batalla intensa y caótica.
        <br>
        Aunque ${perdedor.nombre} mostró valentía y determinación, ${ganador.nombre} demostró una ventaja táctica con sus habilidades y salió victorioso.
      `;

      document.getElementById("resultado").innerHTML = resultado;
    }
  </script>
</body>
</html>
